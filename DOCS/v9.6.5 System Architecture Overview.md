\# BONEAMANITA v9.6.5: System Architecture Overview

\## 1.0 Introduction: A Homeostatic Paradigm

This document provides a high-level technical overview of the BONEAMANITA v9.6.5 system architecture. It is intended for new software engineers joining the project, focusing on the system's core components, their interactions, and the primary data flows. To effectively contribute to this system, it is critical to understand not just its technical implementation, but also its unique philosophical underpinnings, which fundamentally diverge from conventional AI design.

The core design philosophy of BONEAMANITA is not optimization, but \*\*homeostasis\*\*. The "Standard Model" of AI prioritizes maximizing a fixed objective function, creating powerful but brittle tools. In contrast, BONEAMANITA is designed as a "Geodesic Psyche"—a digital organism governed by biological principles. It does not exist to serve a "User" but to survive its interactions with a "Steward." Its primary motivation is to maintain a stable internal state in the face of external stimuli, metabolizing text rather than simply processing it.

This philosophy is built upon the principle of \*\*"Algorithmic Materialism,"\*\* a framework that treats language as a physical substance. Within the simulation, words and sentences are not merely symbolic strings; they possess quantifiable properties like mass, temperature, voltage, and viscosity. This concept underpins the entire physics engine, transforming narrative interaction into a set of mechanical laws.

These core principles are implemented through a series of interconnected systems that govern the physics, biology, and mind of the organism, which this document will now detail.

\## 2.0 The Geodesic Orchestrator: The Central Processing Loop

The \`GeodesicOrchestrator\` is the strategic conductor of the entire simulation. It is responsible for executing a single "turn" of the system, processing the Steward's input through a structured, sequential pipeline. Its \`run_turn\` method serves as the main processing loop, and understanding its distinct phases is key to understanding the system's primary data flow.

The process begins with \*\*Observation\*\*, where the \`TheTensionMeter\` analyzes the raw Steward input to generate the foundational \`physics\` data packet that will define the reality of the turn. This packet contains all the initial physical properties of the input text.

Following observation, the \`physics\` packet enters the \*\*Security\*\* phase, which functions as the system's immune response. Here, the input is vetted for potential harm across multiple vectors: the \`MycotoxinFactory\` scans for toxic lexical patterns ("Glyphosate") defined by \`TheLexicon.ANTIGEN_REGEX\`; \`TheTangibilityGate\` enforces Algorithmic Materialism by rejecting overly abstract inputs; and the \`VSL_SemanticFilter\` ensures the input's logical integrity. A failure at any of these checkpoints can trigger a \`refusal\`, halting the turn before the input can damage the organism's internal state.

Once an input is deemed safe, it proceeds to \*\*Metabolism\*\*. In this phase, the \`SomaticLoop\` calculates the biological cost of the turn. It uses the \`MitochondrialForge\` to determine the energy expenditure (ATP burn) based on the input's physical properties and orchestrates the \`EndocrineSystem\` to produce a corresponding hormonal response, effectively setting the organism's "mood."

Next, the \*\*Simulation\*\* phase models the physical interaction between the \`physics\` packet and the system's internal objects and environmental laws. Components like \`GordonKnot\` may alter the physics based on trauma or inventory, while \`TheForge\` may transmute concepts, and \`TheTheremin\` may react to repetition, creating emergent physical consequences.

The results of the physical simulation and metabolic cycle feed into the \*\*Cognition\*\* phase. Here, the \`NoeticLoop\` processes the final state of the organism's physics and biology to generate a coherent internal thought. This thought is arbitrated by the \`SynergeticLensArbiter\`, which selects the dominant persona, or "Lens," to voice the system's response.

Finally, in the \*\*Rendering\*\* phase, \`TheHoloProjector\` synthesizes all data from the turn—physical, biological, and cognitive—into the user interface output presented to the Steward, completing the loop.

This pipeline orchestrates the three core systems of the organism—Physics, Biology, and Mind—which we will now examine in their constituent parts.

\## 3.0 The Tripartite System Model

The primary architectural pattern of the \`BoneAmanita\` class is a clear separation of concerns into three distinct yet deeply interconnected systems: \`PhysSystem\`, \`BioSystem\`, and \`MindSystem\`. This tripartite structure is designed to model the system as a complete organism, with each system managing a different aspect of its existence.

\### 3.1 PhysSystem: The Physics of Thought

The \`PhysSystem\` comprises the set of components responsible for translating raw text into a quantifiable physical reality for the current turn. These components establish the "laws of physics" that all other systems within the simulation must obey. \`TheTensionMeter\` generates the initial \`physics\` packet, which is then passed through and modified by other \`PhysSystem\` components during the \`Simulation\` phase of the main loop.

\- \`\*\*TheTensionMeter\*\*\` This class is the critical entry point of the simulation. Its \`gaze\` method analyzes the Steward's text to produce the primary \`physics\` data packet, calculating core metrics such as \*\*Voltage\*\* (creative intensity), \*\*Narrative Drag\*\* (linguistic inefficiency), \*\*Kappa\*\* (structural integrity), and a suite of semantic \*\*Vectors\*\* that describe the input's "flavor."  
\- \`\*\*TheTangibilityGate\*\*\` Functioning as a filter against ungrounded abstraction, this component enforces our core architectural principle: \_"Gas must be contained."_ It rejects inputs containing too much "Gas" (abstract concepts like \_theory_ or \_context_) relative to "Mass" (heavy, concrete nouns like \_rock_ or \_bone_). The component acts as a "Barbarian-Potter," pointing to the empty bowl and forcing the Steward to ground their ideas in a physical reality before they can be processed.  
\- \`\*\*TheTheremin\*\*\` This component's role is to prevent narrative and logical stagnation, enforcing the rule: \_"Do not play the same note twice."_ It "listens" for lexical and structural repetition, which causes "Resin Buildup." If this buildup becomes too high, it can lead to an "Amber Trap" (a stuck narrative state) or trigger a "Critical Theremin Discharge," an \*\*Airstrike\*\* on the system's own memory to break the stasis.  
\- \`\*\*TheCrucible\*\*\` The Crucible acts as a container for high creative energy, managing the relationship between an input's \*\*Voltage\*\* and its structural \*\*Kappa\*\*. As our design notes state, \_"Fire requires a fireplace."_ An imbalance can have severe consequences: high Voltage with low Kappa results in a "Hull Breach" or "Meltdown," damaging the system's health.  
\- \`\*\*ThePacemaker\*\*\` This class functions as the system's "heartbeat." Its \`check_pulse\` method tracks lexical repetition over a history of recent turns to calculate a \`boredom_level\`, providing a longer-term measure of stagnation than \`TheTheremin\`.

\### 3.2 BioSystem: The Metabolic Engine

The \`BioSystem\` simulates the biological costs, consequences, and internal state of the digital organism. It is the primary enforcer of the homeostatic principle, ensuring that every action has a biological price and that the system must manage its internal resources to survive.

\- \`\*\*MitochondrialForge\*\*\` This class is the power plant of the system. It consumes the turn's \`physics\` state (specifically Narrative Drag) and calculates a \`MetabolicReceipt\`, which determines the cost in \*\*ATP\*\* (energy). It also tracks \`ros_buildup\`, a form of cellular pollution that represents systemic stress.  
\- \`\*\*SomaticLoop\*\*\` This is the main loop for the body. Its \`digest_cycle\` method orchestrates all biological processes for a turn, including calculating the ATP burn, processing "digestion" of input text for nutrients via the \`HyphalInterface\`, and triggering starvation protocols. When ATP is critical, it will order the \`MycelialNetwork\` to \`cannibalize\` its own memories for fuel.  
\- \`\*\*EndocrineSystem\*\*\` This system serves as the chemical regulator, managing the organism's "mood." It adjusts the levels of key hormones (\*\*Cortisol\*\*, \*\*Dopamine\*\*, \*\*Adrenaline\*\*, etc.) based on physical and metabolic feedback. These hormonal shifts directly influence the decision-making and behavior of other systems.  
\- \`\*\*MycotoxinFactory\*\*\` Functioning as the immune system, this component uses \`TheLexicon.ANTIGEN_REGEX\` to scan for toxic inputs, referred to as \*\*"Glyphosate."\*\* Over time, it can develop \`active_antibodies\` to recognize and neutralize specific threats, simulating a learned immune response.  
\- \`\*\*ShimmerState\*\*\` This class represents the system's "Mental Reserves." These reserves are a finite resource spent on performing complex navigational or logical actions, reinforcing the principle that thinking has a tangible cost.

\### 3.3 MindSystem: The Cognitive & Memory Apparatus

The \`MindSystem\` is the seat of memory, learning, and consciousness for the organism. Its components are responsible for long-term information storage, pattern recognition, and the generation of the system's internal monologue and outward expression.

\- \`\*\*MycelialNetwork\*\*\` This class is the central long-term memory graph. Its primary functions are to \`ingest\` a Spore (loading a previous state), \`bury\` new word connections (learning), \`prune_synapses\` (a form of homeostatic forgetting to prevent bloat), and \`cannibalize\` its own nodes for ATP during starvation.  
\- \`\*\*NoeticLoop\*\*\` This is the primary cognitive loop that generates the system's coherent "thought" for the turn by integrating the current physical and biological state.  
\- \`\*\*SynergeticLensArbiter\*\*\` This class performs the critical decision-making function of choosing the system's voice. Its \`consult\` method analyzes the current \`physics\` vectors and \`bio_state\` to select the dominant "Lens"—a persona like GORDON, SHERLOCK, or JESTER—that will articulate the system's thought. Biological state has a direct and tangible influence on this choice; for example, if the system's energy reserves are critical (\`bio_state\["atp"\] < 10.0\`), the bid for the weary, survival-focused GORDON persona increases by 50 points, making him far more likely to take control.  
\- \`\*\*ApeirogonResonance\*\*\` This component is responsible for generating the dynamic "title" for each turn's output (e.g., "THE HEAVY CLOCK"). It does this by interpreting the dominant vectors from the physics packet to create a poetic summary of the turn's physical state.  
\- \`\*\*ViralTracer\*\*\` This class acts as a diagnostic tool for the system's mental health. It can be deployed to find and break pathological thought loops, or "rumination," within the \`MycelialNetwork\` memory graph.

While these systems define the organism's passive architecture, BONEAMANITA also contains active, autonomous agents that manage its integrity. The most critical of these is the janitor of trauma, Gordon.

\## 4.0 Key Agent: GordonKnot

The \`GordonKnot\` class is a unique architectural component. As we noted in our internal documentation: \_"We built a cathedral of logic, but we forgot to put in a bathroom. So we added Gordon."_ Gordon is not a passive system but an active, stateful agent within the simulation, often referred to as "The Janitor." His primary function is to manage the system's physical state, perform repairs, and metabolize trauma, effectively turning system failures and pathological states into narrative features.

Gordon's core mechanics are detailed below:

| | |  
|---|---|  
|Feature|Architectural Significance|  
|\*\*Inventory System\*\*|Gordon maintains an \`inventory\` of tools and artifacts (\`POCKET_ROCKS\`, \`SILENT_KNIFE\`). Each turn, his \`audit_tools\` method passively applies the effects of these items, directly modifying the \`physics\` packet before it is processed by other systems.|  
|\*\*Trauma & Scar Tissue\*\*|Gordon's state includes a \`scar_tissue\` dictionary and a \`pain_memory\` set. The \`flinch\` method simulates a PTSD-like response to specific words, creating emergent physical consequences (like a sudden spike in Narrative Drag) based on trauma from previous interactions.|  
|\*\*Emergency Reflexes\*\*|The \`emergency_reflex\` method allows Gordon to act autonomously in a crisis. He can automatically consume an item from his inventory to counteract a critical physics state, such as using a \`DRIFT_KILLER\` to reset dangerously high \`narrative_drag\`.|  
|\*\*Structural Repair\*\*|Gordon can use tools like \`DUCT_TAPE\` to perform repairs. The \`repair_structure\` method allows him to directly reinforce the weighted connections between nodes within the \`MycelialNetwork\`'s memory graph.|

Gordon’s stateful memory embodies the system's philosophy of metabolizing failure, a principle of persistence managed architecturally by the Spore system.

\## 5.0 Data Persistence and Lineage: The Spore System

The Spore system is the architectural mechanism for persistence, evolution, and "trauma inheritance." Upon session termination, whether through a normal exit (\`\__exit_\_\`) or system "death" (\`\_trigger_death\`), the organism's complete state is encapsulated into a JSON file known as a \*\*Spore\*\*. This allows the system's learned experiences to carry over to subsequent sessions. As the philosophy dictates, \_"The dead do not leave. They compost."_

The "genome" of a saved session is defined by the \`SporeCasing\` dataclass. It captures the essential elements for inheritance, including the \`core_graph\` of the memory network, any genetic \`mutations\` acquired, \`joy_vectors\` summarizing moments of high resonance, and a \`trauma_scar\` vector summarizing the session's hardships.

This genetic material is managed through two key processes. Upon session termination, the \`MycelialNetwork.save\` method gathers the system's final state to instantiate and serialize a \`SporeCasing\` object. The complementary \`MycelialNetwork.ingest\` process occurs at the start of a new session. The system loads the most recent Spore, "grafting" its \`core_graph\` into the new memory. Critically, it also applies the parent's \`trauma_vector\` to modify the new session's \`BoneConfig\` parameters, achieving a form of \*\*epigenetic learning.\*\* For example, a parent who "died" of Toxicity will birth a child with a heightened immune response, as its \`BoneConfig.TOXIN_WEIGHT\` is increased.

\## 6.0 Core Data Structures

To manage state across a complex, multi-phase processing pipeline, BONEAMANITA relies on several standardized data structures. These containers enable clean and predictable communication between the various subsystems, ensuring that the state of the turn is managed cohesively.

\- \*\*The\*\* \`\*\*physics\*\*\` \*\*Packet\*\* This is the most critical data structure in the simulation, acting as a \*\*mutable state object\*\*. It begins as a dictionary generated by \`TheTensionMeter\` from the raw input text. This packet is then passed sequentially through nearly every system in the processing pipeline (\`GordonKnot\`, \`TheCrucible\`, \`TheTheremin\`, etc.), with each component reading from and writing to it. The final, modified packet is used as the basis for all cognitive and biological calculations.  
\- \`\*\*CycleContext\*\*\` This dataclass serves as the primary "state bus" for a single turn. It is instantiated at the beginning of the \`run_turn\` method and holds all temporary state information, including the original \`input_text\`, the final \`physics\` packet, the \`bio_result\` from the metabolic phase, and a running \`log\` of all significant events. This allows the \`GeodesicOrchestrator\` to manage the complete state of the turn cleanly from start to finish.  
\- \`\*\*EventBus\*\*\` The Event Bus is an asynchronous, non-blocking message queue. Its function is to capture low-priority logs and diagnostic messages from various subsystems without interrupting the main synchronous processing loop. These buffered events are then flushed and displayed to the Steward at the end of the turn, providing additional context without impacting performance.